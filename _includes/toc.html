<ul id='toc'>
  <script src="/js/jquery-3.1.1.slim.min.js"></script>
  <script>
    $(document).ready(function () {
      let frag = document.createDocumentFragment();
      $('h2').filter('[id]').each(function () {
        let li = document.createElement("li");
        let a = document.createElement("a");
        a.href = "#" + $(this).attr('id');
        a.textContent = $(this).text();
        li.appendChild(a);
        frag.appendChild(li);
      })
      document.getElementById('toc').appendChild(frag);
    })
  </script>
</ul>
